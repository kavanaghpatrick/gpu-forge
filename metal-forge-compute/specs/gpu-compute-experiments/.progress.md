# Progress: gpu-compute-experiments

## Completed Tasks
- [x] 4.4 JSON/CSV parsing experiment - pending commit
- [x] 4.5 Hash join kernel + experiment

## Current Task
Awaiting next task

## Learnings
- CsvBenchParams needs to be added to both types.h (Metal) and types.rs (Rust) with matching layout
- csv_bench.metal uses threadgroup-local atomic accumulation to reduce global atomic contention -- same pattern as histogram
- GPU CSV parsing achieves ~3x speedup at 1MB (1.3 GB/s) -- bandwidth-limited, not compute-bound
- csv_records() generator produces ~50 bytes/row with 10 random integer fields
- Hash join GPU achieves 214x speedup over CPU HashMap at 1M keys -- dominated by CPU overhead in HashMap
- Open-addressing hash table with atomic CAS works well on GPU; load factor < 0.5 prevents excessive probing
- PsoCache double-mutable-borrow fixed by scoping each PSO get_or_create in separate blocks
- GPU hash join uses last-writer-wins for duplicate build keys; validation must compare against dedup baseline
- Knuth multiplicative hash (key * 2654435761) with power-of-2 table size provides good distribution

## Next
All tasks complete
